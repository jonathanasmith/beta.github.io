<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <meta name="viewport" content="width=device-width, initial-scale=1, min-scale=1, max-scale=1, shrink-to-fit=no">

  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="manifest" href="favicon/site.webmanifest">
  <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <title>Home</title>
  <link href="css/default.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
</head>
<body>
  <header class="F_1 FR B_i">
    <div class="F_1 flexCell_v"></div>
    <div class="F_1 flexCell_v"><img src="images/logo_white.png" class="H_50"/></div>
    <div class="F_1 flexCell_vi "></div>
  </header>
  <div class="F_1">
    <div style="max-width:900px;margin:auto">
      <div class="H_50"></div>

      <!--Connect Block-->
      <div class="M_L_50 M_R_50 FC" id="connect">
        <div class="F_1 h3 TA_C">We make gear you unlock by running. Connect with Strava below to get started (or to log back in)</div>
        <div class="H_20"></div>
        <div class="F_1 TA_C">
          <a href="https://www.strava.com/oauth/authorize?client_id=7316&response_type=code&redirect_uri=https://api.kick.run/beta&approval_prompt=force&scope=view_private,write">
            <img src="images/btn_strava_connectwith_orange@2x.png" class="link H_50"/>
          </a>
          <div class="H_20"></div>
        </div>
      </div>
      <!--Connect Block-->
      <div class="flexCell_viii" id="loading">
        <img src="https://cdn.shopify.com/s/files/1/1368/7687/files/Spinner.gif?1196196044267427305" class="H_75">
      </div>
      <!--Connect Block-->
      <div class="flexCell_v" id="connected">
        <div class="h3 TA_C M_L_50 M_R_50 LH_15">ðŸ‘‹ Hi, <span id="firstName"></span>, welcome to Kick.run! Check out your tops and challenges below</div>
      </div>
      <!--Connect Block-->
      <!--Demo Block-->
      <div id="demo" class="FR fade">
        <div id="demoContent" class="F_1 behind productContainer">
          <div class="h3 FR AI_C JC_C M_L_20 M_R_20 M_B_10">
          </div>
          <div class="BI_iv H_10 M_L_20 M_R_20"></div>
          <div class="H_30"></div>
          <div class="FR ">
            <div class="F_1 collapse FR">
              <div class="F_1 flexCell_v">
                <img src="images/top1.png" class="productImage"/>
                <div class="H_20"></div>
              </div>
              <div class="F_1 flexCell_v">
                <img src="images/top2.png" class="productImage"/>
                <div class="H_20"></div>
              </div>
            </div>
            <div class="F_1 collapse FR ">
              <div class="F_1 flexCell_v">
                <img src="images/top3.png" class="productImage"/>
                <div class="H_20"></div>
              </div>
              <div class="F_1 flexCell_v">
                <img src="images/top4.png" class="productImage"/>
                <div class="H_20"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--Demo Block-->

      <!--Unlockable Products-->
      <div id="unlockable">
        <!--Product Block 1-->
        <div class="H_50"></div>
        <div class="h3 FR AI_C JC_C M_L_20 M_R_20 M_B_10">
          <div class="F_10 ">Have you run the distance?</div>
        </div>
        <div class="BI_iii H_10 M_L_20 M_R_20"></div>
        <div class="H_30"></div>
        <div class="FR ">
          <div class="F_1 collapse FR">
            <div class="F_1 flexCell_v">
              <img src="images/top1.png" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"><i class="fas fa-check"></i>&nbsp;&nbsp;5k</button>
              <div class="H_50"></div>
            </div>
            <div class="F_1 flexCell_v">
              <img src="images/top2.png" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"><i class="fas fa-check"></i>&nbsp;&nbsp;10k</button>
              <div class="H_50"></div>
            </div>
          </div>
          <div class="F_1 collapse FR ">
            <div class="F_1 flexCell_v">
              <img src="images/top3.png" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"><i class="fas fa-check"></i>&nbsp;&nbsp;Half Marathon</button>
              <div class="H_50"></div>
            </div>
            <div class="F_1 flexCell_v">
              <img src="images/top4.png" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active disable B_i"><i class="fas fa-lock"></i>&nbsp; Marathon</button>
              <div class="H_50"></div>
            </div>
          </div>
        </div>
        <!--Product Block 1-->

        <!--Product Block 2-->

        <div class="h3 FR AI_C JC_C M_L_20 M_R_20 M_B_10">
          <div class="F_10 ">What's your next adventure?</div>
        </div>      
        <div class="BI_iii H_10 M_L_20 M_R_20"></div>
        <div class="H_30"></div>
        <div class="FR">
          <div class="F_1 collapse FR ">
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> Ultra</button>
              <div class="H_50"></div>

            </div>
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> Explorer</button>
              <div class="H_50"></div>

            </div>
          </div>
          <div class="F_1 collapse FR ">
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> Climber</button>
              <div class="H_50"></div>
            </div>
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> Traveller</button>
              <div class="H_50"></div>

            </div>
          </div>
        </div>
        <!--Product Block 2-->

        <!--Product Block 3-->

        <div class="h3 FR AI_C JC_C M_L_20 M_R_20 M_B_10">
          <div class="F_10">How far will you go this month?</div>
        </div>      
        <div class="BI_iii H_10 M_L_20 M_R_20"></div>
        <div class="H_30"></div>

        <div class="FR">
          <div class="F_1 collapse FR ">
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> 50k</button>
              <div class="H_50"></div>

            </div>
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> 100k</button>
              <div class="H_50"></div>

            </div>
          </div>
          <div class="F_1 collapse FR ">
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> 150k</button>
              <div class="H_50"></div>
            </div>
            <div class="F_1 flexCell_v">
              <img src="https://cdn.shopify.com/s/files/1/1368/7687/products/KickBlanks14_480x480.jpg?v=1530851903" class="productImage"/>
              <div class="H_20"></div>
              <button class="Bu_i active B_i"> 200k</button>
              <div class="H_50"></div>

            </div>
          </div>
        </div>
        <!--Product Block 3-->

        <!--Unlock Products-->

        <div class="H_50"></div>
        <div class="BI_iii H_10 M_L_20 M_R_20"></div>
        <div class="H_20"></div>
        <div class="p3 M_L_20 M_R_20 LH_2">

          <span class="FW_600">Account Settings:</span> 

          Your account is connected <button class="active Bu_ii BS B_iv" onclick="disconnect()"><i class="fas fa-unlink"></i>&nbsp;&nbsp;Disconnect</button> 

          <span id="notifications1" style="display:none">Unlock notifications are on <button class="active Bu_ii BS B_i" onclick="notificationsOff()"><i class="fas fa-bell-slash"></i>&nbsp;&nbsp;Turn off</button></span>

          <span id="notifications2" style="display:none">Unlock notifications are off <button class="active Bu_ii BS B_i" onclick="notificationsOn()"><i class="fas fa-bell"></i>&nbsp;&nbsp;Turn on</button></span>

          <span id="preferences1" style="display:none">You are receiving updates and offers from Kick.run <button class="active Bu_ii BS B_i" onclick="preferencesOff()"><i class="fas fa-bullhorn"></i>&nbsp;&nbsp;Stop updates</button></span>

          <span id="preferences2" style="display:none">You are not receiving updates and offers from Kick.run <button class="active Bu_ii BS B_i" onclick="preferencesOn()"><i class="fas fa-bullhorn"></i>&nbsp;&nbsp;Receive updates</button></span>

          Any other queries? Just <button class="active Bu_ii BS B_i" onclick="location.href='mailto:hello@kick.run';"><i class="fas fa-envelope"></i>&nbsp;&nbsp;Get in touch</button>

        </div>

        <div class="H_50"></div>
      </div>
    </div>
  </div>

  <footer class="F_1 B_i FR H_75">
    <div class="footerContainer FR H_75 ">
      <div class="F_1 flexCell_iv M_L_20">&copy; Runwithkick Limited 2018</div>
      <div class="F_1 flexCell_v">
      </div>
      <div class="F_1 FR AI_C JC_E h2 P_R_20">
        <a href="https://facebook.com/runwithkick" class="noStyle" target="_blank"><i class="fab fa-facebook-square"></i></a>&nbsp;&nbsp;
        <a href="https://twitter.com/runwithkick" class="noStyle" target="_blank"><i class="fab fa-twitter-square"></i></a>&nbsp;&nbsp;
        <a href="https://instagram.com/runwithkick" class="noStyle" target="_blank"><i class="fab fa-instagram"></i></a>
      </div>
    </div>
  </footer>
</body>
</html>

<script src="https://npmcdn.com/parse@1.11.1/dist/parse.js"></script>
<script src="JS/main.js"></script>


<script>


//document.cookie = "accessToken="+accessTokenURL+";max-age=2678400; path=/";
//var accessTokenCookie = getCookie("accessToken")

Parse.initialize(
  "bxr71QksTuJsPlLRodiehCBmfPtrKIzSsuu2YtId",
  "AMzZx8qW1pw9STOOjf625wkDau1vzddW0svKd7Dq"
);
Parse.serverURL = 'https://parseapi.back4app.com';

var accessTokenURL = getQueryVariable("accesstoken");


if(accessTokenURL.length>0){
  
  document.getElementById("loading").style.display = "flex";
  document.getElementById("connect").style.display = "none";
  document.getElementById("demo").style.display = "none";

Parse.Cloud.run('retrieveUser', {
  AccessToken: accessTokenURL 
}, {
  success: function(result) {

    document.getElementById("firstName").innerHTML = result.tokenResponse.athlete.firstname;
    document.getElementById("connected").style.display = "flex";
    document.getElementById("unlockable").style.display = "block";
    document.getElementById("loading").style.display = "none";

    var notifications = result.notifications
    var updates = result.updates

    if (notifications){document.getElementById("notifications1").style.display = "inline";}
    else{document.getElementById("notifications2").style.display = "inline";}

    if (updates){document.getElementById("preferences1").style.display = "inline";}
    else{document.getElementById("preferences2").style.display = "inline";}

  },
  error: function(error){
    document.getElementById("connect").style.display = "flex";
    document.getElementById("demo").style.display = "flex";
  document.getElementById("loading").style.display = "none";

  }
});

}


function notificationsOn(){

updateUser(accessTokenURL,"notifications",true);
document.getElementById("notifications2").style.display = "none";
document.getElementById("notifications1").style.display = "inline";
}

function notificationsOff(){

updateUser(accessTokenURL,"notifications",false);
  document.getElementById("notifications1").style.display = "none";
  document.getElementById("notifications2").style.display = "inline";
}


function preferencesOn(){

updateUser(accessTokenURL,"updates",true);
  document.getElementById("preferences2").style.display = "none";
  document.getElementById("preferences1").style.display = "inline";
}

function preferencesOff(){
updateUser(accessTokenURL,"updates",false);
  document.getElementById("preferences1").style.display = "none";
  document.getElementById("preferences2").style.display = "inline";
}

function disconnect(){

  if (confirm("Are you sure? Disconnecting will completely remove your Kick.run achievements to date.")) {
    alert("Remove account process")
  } else {
    return false;
  }
}





</script>
